!function(){"use strict";var e=function(){function e(e){void 0===e&&(e={}),this.services={},this._env="u"===(typeof window)[0]?"server":"client";for(var t=0,n=Object.keys(e);n.length>t;t++){var r=n[t];this.bind(r,e[r])}}return Object.defineProperty(e.prototype,"env",{get:function(){return this._env},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"location",{get:function(){return this.get("location")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cookies",{get:function(){return this.get("cookies")},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=this.services[e];if(void 0!==t)return t;throw new Error("No service "+e)},e.prototype.getOr=function(e,t){var n=this.services[e];return void 0!==n?n:t},e.prototype.bind=function(e,t){this.services[e]=t},e}(),t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);r.length>o;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function o(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;i>o;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var i={tapi:function(e,t,r){return void 0===r&&(r={}),e.get("request")(""+e.get("config").api+t,n({},r)).then((function(e){return e.json()}))},configApi:function(e,t,r){void 0===r&&(r={});var o=e.get("config").configApi;return e.get("request")(""+o+t,n({},r)).then((function(e){return e.json()}))}},a=function(){function e(e){this.clear=this.getSafeVersionOfMethod("clear",void 0),this.key=this.getSafeVersionOfMethod("key",null),this.setItem=this.getSafeVersionOfMethod("setItem",void 0),this.getItem=this.getSafeVersionOfMethod("getItem",null),this.removeItem=this.getSafeVersionOfMethod("removeItem",void 0),this.storageType=e}return Object.defineProperty(e.prototype,"length",{get:function(){try{return this.storage.length}catch(e){}return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){if(!this.storageImpl){var e={local:localStorage,session:sessionStorage};this.storageImpl=e[this.storageType]}return this.storageImpl},enumerable:!1,configurable:!0}),e.prototype.getSafeVersionOfMethod=function(e,t){var n=this;return function(){for(var r,o=[],i=0;arguments.length>i;i++)o[i]=arguments[i];try{return(r=n.storage)[e].apply(r,o)}catch(e){}return t}},e}(),u=new a("local"),c=new a("session");var s=function e(t){var n=Math.random().toString(36).slice(2);return 10>n.length?e():n},l=function(e){var t,r=e.url,o=e.payload,i=e.timeout,a=e.cbname,u=void 0===a?"callback":a,c="cb"+s(),l=function(e){for(var t=[],n=0,r=Object.keys(e);r.length>n;n++){var o=r[n];e[o]&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]))}return t.length?"?"+t.join("&"):""}(n(((t={})[u]=c,t),o));return new Promise((function(e,t){var n=document.createElement("script"),o=!1;n.addEventListener("error",(function(e){o||(t(e),o=!0)})),window[c]=function(t){delete window[c],document.head.removeChild(n),o||(e(t),o=!0)},n.src=r+l,document.head.appendChild(n),i&&setTimeout((function(){o||(o=!0,t(new Error("Timeout")))}),i)}))};function d(e,t){for(var n={},r=0,o=e;o.length>r;r++){var i=o[r];i in t&&(n[i]=t[i])}return n}function f(e,t,n){void 0===t&&(t="&"),void 0===n&&(n="=");for(var r={},o=0,i=e.split(t);i.length>o;o++){var a=String(i[o]).split(n);if(a[0]&&a[1]){var u=a[1];try{u=decodeURIComponent(a[1])}catch(e){}r[decodeURIComponent(a[0])]=u}}return r}function p(e){void 0===e&&(e=document.location);var t=n(n({},d(["hash","host","hostname","href","pathname","port","protocol","search","origin"],e)),{query:f(e.search.slice(1))});return"/"!==t.pathname[0]&&(t.pathname="/"+t.pathname),t}function v(e){var t=document.createElement("a");return t.href=e,p(t)}var m=function(e){function n(t){var n=e.call(this,"Not success status code of request: "+t.status+" "+t.statusText)||this;return n.statusCode=t.status,n.statusText=t.statusText,n.url=t.url,n}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n}(Error);function h(e){if(200>e.status||e.status>=400)throw new m(e);return e}var g=function(e,t){void 0===t&&(t={});var o=t.headers,i=t.timeout,a=void 0===i?1500:i,u=t.body,c=t.method,s=void 0===c?"GET":c,l=r(t,["headers","timeout","body","method"]),d={},f={method:s,headers:d},p=function(e){if("AbortController"in window){var t=new AbortController;return setTimeout((function(){t.abort()}),e),t.signal}}(a);return p&&(f.signal=p),void 0!==u&&(f.body="string"==typeof u?u:JSON.stringify(u),d["Content-Type"]="application/json"),Object.assign(f.headers,o),fetch(e,n(n({},f),l)).then(h).catch((function(t){throw t instanceof Error&&((null==p?void 0:p.aborted)&&(t.message="Request time exceeded "+a+"ms"),Object.assign(t,{url:e,method:s})),t}))},y=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,w=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/;function b(e){return y.test(t=e)||w.test(t)?e:0>e.indexOf("localhost")?"."+e.split(".").slice(-2).join("."):"localhost";var t}function k(e){var t=(("; "+document.cookie).split("; "+e+"=")[1]||"").split("; ")[0];try{return decodeURIComponent(t)}catch(e){return t}}function S(){var e,t=b(location.hostname),n=(e="test_cookie_QpHfCYJQhs",document.cookie=e+"=true; samesite=none; secure",""!==k(e));function r(e,r,o,i){var a=[];a.push(e+"="+encodeURIComponent(r)),o&&"boolean"!=typeof o&&Number.isFinite(o)&&a.push("expires="+new Date(Number(new Date)+1e3*o).toUTCString()),a.push("path=/"),i&&a.push("domain="+t),n&&(a.push("samesite=none"),a.push("secure")),document.cookie=a.join("; ")}return{all:f(document.cookie,"; ","="),get:k,set:r,remove:function(e,t){r(e,"",-1,t)}}}var _=function(){try{var e=new CustomEvent("a",{detail:{b:"c"}});return"a"===e.type&&"c"===e.detail.b}catch(e){}return!1}()?function(e,t){return new CustomEvent(e,t)}:function(e,t){var n=t.bubbles,r=void 0!==n&&n,o=t.cancelable,i=void 0!==o&&o,a=t.detail,u=document.createEvent("CustomEvent");return u.initCustomEvent(e,r,i,a),u};function O(e,t,n){void 0===n&&(n=document.body),n.dispatchEvent(_(e,{detail:t,bubbles:!0}))}function j(e,t){return e.get("request")(e.get("config").frontLogApi+"collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0})}var E=n({global:"tracking",initialState:{},disableJsonp:!1,enrichTimeout:1500,utilTimeout:2e3},{api:"https://www.tinkoff.ru/api/v1/",configApi:"https://config.tinkoff.ru/",papiBase:"https://www.tinkoff.ru/",enrichApi:"https://enrichment.tinkoff.ru/",frontLogApi:"/api/front/log/",cdnUrl:"https://www.cdn-tinkoff.ru/",resourceApi:"https://acdn.tinkoff.ru/"}),P=/^\d+(0|s|t)\d+$/,I=["utm_source","utm_content","utm_campaign","utm_medium","utm_term","sid","wm"],T=["ctx_position","ctx_block","ctx_source"],A=["internal_source"],C=5184e3,V=31536e4,x=Array.prototype.slice;function M(e){return"object"==typeof e}function N(e){if(Array.isArray(e))return e.slice();var t={};for(var n in e)t[n]=e[n];return t}function L(e,t,n){return M(e)&&null!==e&&t in e?e[t]:n}function q(e,t,n){var r=t[0],o=t.slice(1);return L(e,r)&&o.length?q(e[r],o,n):L(e,r,n)}function D(e,t,n){return Array.isArray(t)?q(e,t,n):L(e,t,n)}function R(e,t,n){if(e[t]===n)return e;var r=N(e);return r[t]=n,r}function z(e,t,n){if(q(e,t)===n)return e;var r=t[0],o=t.slice(1),i=N(e);return i[r]=o.length?z(r in i?i[r]:{},o,n):n,i}function U(e){for(var t,n,r=arguments,o=arguments.length,i=e,a=1;o>a;a+=2)t=r[a],n=r[a+1],i=Array.isArray(t)?z(i,t,n):R(i,t,n);return i}function F(e,t){if(!(t in e))return e;var n=N(e);return delete n[t],n}function B(e,t){var n=t[0],r=t.slice(1);return r.length?n in e&&B(e[n],r):n in e}function H(e,t){if(!B(e,t))return e;var n=t[0],r=t.slice(1),o=N(e);return 0!==r.length?(o[n]=H(e[n],r),0===Object.keys(o[n]).length&&delete o[n]):delete o[n],o}function $(e){for(var t,n=arguments,r=arguments.length,o=0,i=e;++o<r;)t=n[o],i=Array.isArray(t)?H(i,t):F(i,t);return i}function J(e,t,n){var r=L(e,t);return R(e,t,n.apply(r,[r].concat(x.call(arguments,3))))}function G(e,t,n){var r=q(e,t);return z(e,t,n.apply(r,[r].concat(x.call(arguments,3))))}function K(e,t){return Array.isArray(t)?G.apply(this,arguments):J.apply(this,arguments)}function W(e,t){for(var n,r,o=Object.keys(t),i=o.length,a=-1,u=e;++a<i;)u=M(n=t[r=o[a]])&&null!==n?R(u,r,r in u?W(u[r],n):N(n)):R(u,r,n);return u}function Y(e){var t=e.location.query.parent_url,n=e.get("parseUrl");if(t)return n(t)}var Q={name:"url",run:function(e){var t=Y(e),n=t||e.location;return t&&(n.frameurl=e.location.pathname),n}};function Z(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))}var X="undefined"!=typeof Request&&"keepalive"in new Request(""),ee=function(e){return fetch(e,{mode:"no-cors",credentials:"include",keepalive:X})};function te(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];return 0===e.length?function(e){return e}:1===e.length?e[0]:e.reduce((function(e,t){return function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];return e(t.apply(void 0,n))}}))}var ne=function(e){return Object(e)===e&&Object.getPrototypeOf(e)===Object.prototype},re=function(){},oe="log function is now deprecated, use logger object instead";var ie=function(e){return null==e},ae=function(e){return!!e&&Array.isArray(e)},ue=function(e){return"string"==typeof e||e instanceof String},ce=function(e){return null!==e&&"object"==typeof e},se=function(e){switch(!0){case ie(e):return!0;case ue(e):return""===e;case ae(e):return 0===e.length;case ce(e):return 0===Object.keys(e).length}return!1},le=function(){};function de(e,t,n){return void 0===n&&(n="0"),t>e.length?new Array(t-e.length+1).join(n)+e:e}var fe="ta_uid";var pe={name:"uid",run:function(e){var t,n,r=e.cookies.get(fe);return r&&!function(e){if(19!==e.length)return!0;var t=parseInt(e.substr(0,13),10);return 1558602046426>t||t>Date.now()+80352e5}(r)||(t=Date.now(),n=Math.floor(999999*Math.random()),r=t.toString()+de(n.toString(),6)),e.cookies.set(fe,r,63072e3,!0),r}},ve="dmp.id",me="dsp_click_id",he="pageLanding",ge="__P__wuid",ye=["ANONYMOUS","AUTHENTICATED","APPLICANT","CANDIDATE","REGISTERED","CLIENT","EMPLOYEE","ADMINISTRATOR","GOD"],we={name:"userInfo",stateKey:["userId","userStatus"],run:function(e,t){void 0===t&&(t={});var n=t.cookieName,r=t.anonymousId,o="Not Logged In",i={userId:void 0===r?"1111":r,userStatus:o},a=e.cookies.get(void 0===n?"psid":n);return a?e.get("tapi")(e,"session_status?sessionid="+encodeURIComponent(a)).then((function(e){var t=e.payload;return"OK"===e.resultCode?{userId:t.userId,userStatus:4>ye.indexOf(t.accessLevel)?o:"Logged In"}:i})).catch((function(){return i})):Promise.resolve(i)}};var be={name:"referrer",run:function(e){var t="",n=e.getOr("referrer");return n&&n.hostname!==e.location.hostname&&(t=n.hostname),t}},ke=function(e,t){return function n(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return e>o.length?function(){for(var e=arguments.length,t=new Array(e),r=0;e>r;r++)t[r]=arguments[r];return n.apply(this,o.concat(t))}:t.apply(this,o)}},Se=ke(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.slice(-e.length)===e}));function _e(e,t){if(e===t)return!1;var n=["tinkoffinsurance.ru","tinkoff.ru"];return[e,t].some((function(e){return n.every((function(t){return e!==t&&!Se("."+t,e)}))}))}var Oe={name:"utmMarkers",stateKey:["utmMarkers","ctx_position","ctx_block","ctx_source"],run:function(e){var t,r=e.location,o=Y(e),i=r.query.utm_source||!o?r.query:o.query,a=r.hash.replace("#",""),u=a?f(a):{},c=d(A,i),s=C,l=d(I,i),p=d(I,u),v=se(l)?p:l;function m(t,n){for(var r=0,o=t;o.length>r;r++){var i=o[r],a=n[i];a?e.cookies.set(i,a,s,!0):e.cookies.remove(i,!0)}}function h(t){return d(t,e.cookies.all)}function g(){return n({internal_source:""},c)}return v.utm_source?Object.assign({},(t=Date.now(),m(I,v),e.cookies.set("utm_date_set",t,s,!0),{utmMarkers:Object.assign({},v,g(),{cookieDate:t,collectionMethod:"get"})}),function(){var e=i.position;if("string"!=typeof e)return m(T,{});var t,n={};return P.test(e)?(t=e.split(/\D/),n.ctx_position=t.length>1?t[1]:"",n.ctx_block=t[0]+e.replace(/\d/g,"")):(n.ctx_position=e,n.ctx_block=i.block),n.ctx_source=i.source||"",m(T,n),n}()):Object.assign({},function(){var t=h(I),n=be.run(e),o="",i=null,a=null;return t.utm_source?(o=t.utm_source,i=Number(e.cookies.get("utm_date_set"))||null,a="cookie"):(""!==n&&_e(r.hostname,n)&&(o=n,i=Date.now(),a="referrer",e.cookies.set("utm_date_set",i,s,!0)),e.cookies.set("utm_source",o,C,!0)),{utmMarkers:Object.assign({},t,g(),{utm_source:o,cookieDate:i,collectionMethod:a})}}(),h(T))}},je={name:"dmpId",run:function(e){var t=e.getOr("config",{disableJsonp:!1}).disableJsonp;return e.cookies.all[ve]&&"no dmp_id"!==e.cookies.all[ve]?Promise.resolve(e.cookies.all[ve]):t||"client"!==e.env?Promise.resolve(""):e.get("jsonp")({url:"https://sync.datamind.ru/cookie/emitter/jsonp/",timeout:2e3}).then((function(e){try{return e.data.dmp_id}catch(e){return""}})).catch((function(){return""}))}},Ee=ke(2,(function(e,t){var n;function r(){var r=this,o=arguments;clearTimeout(n),n=setTimeout((function(){return t.apply(r,o)}),e)}return r.cancel=function(){return clearTimeout(n)},r})),Pe=Ee;function Ie(e){return Object.keys(e)}var Te={name:"layoutMedia",run:function(){var e={desktopLarge:"(min-width: 1600px)",desktopMedium:"(min-width: 1360px)",desktopSmall:"(min-width: 1024px)",tabletLarge:"(min-width: 768px)",tabletSmall:"(min-width: 600px)",mobile:"(min-width: 599x)"},t="mobile";try{for(var n=0,r=Ie(e);r.length>n;n++){var o=r[n];if(matchMedia(e[o]).matches){t=o;break}}}catch(e){}return t},observe:function(e,t){addEventListener("resize",Pe(300,t))}},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});var Ce,Ve=function(e){return Math.round(e)/1e3},xe=function(e){return function(t){return e.test(t)}},Me=xe(/\.js$/),Ne=xe(/\.css$/),Le=xe(/\.(?:svg|png|jpeg|webp|jpg)$/),qe=xe(/\.(?:woff|eot|woff2|ttf)/);!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(Ce||(Ce={}));var De=function(e,t){if(e.getEntriesByType)return e.getEntriesByType(t)},Re=function(e){var t=De(e,"paint");if(t&&t[0])return t[0].startTime},ze=function(e,t){return e&&e[t]||0},Ue=function(e,t){return{duration:ze(e,"duration")+Ve(t.duration),transferSize:ze(e,"transferSize")+t.transferSize,encodedBodySize:ze(e,"encodedBodySize")+t.encodedBodySize}},Fe=function(e){var t={},n=De(e,"resource");n&&n.length>0&&n.forEach((function(e){var n=function(e){switch(!0){case Ne(e):return Ce.css;case Me(e):return Ce.js;case Le(e):return Ce.img;case qe(e):return Ce.font;default:return Ce.other}}(e.name.split("?",1)[0]);Ce[n]&&(t[n]=Ue(t[n],e))}));var r=De(e,"navigation");return r&&r.length>0&&(t[Ce.html]=Ue({},r[0])),t};var Be=Ae.browserTimings=function(){var e;try{if(!(e=window.performance).timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),new Error("Not implemented timing api")}catch(e){return{}}var t=e.timing,n=t.requestStart,r=t.responseStart,o=t.domComplete,i=t.loadEventEnd,a=t.domInteractive,u=t.navigationStart,c=[{key:"connection",start:u,end:n},{key:"backend",start:n,end:r},{key:"pageDownload",start:r,end:t.responseEnd},{key:"first-paint",start:0,end:Re(e)},{key:"domInteractive",start:u,end:a},{key:"domComplete",start:u,end:o},{key:"pageLoadTime",start:u,end:i}],s={};return c.forEach((function(e){var t=Ve(e.end-e.start);s[e.key]=t>0||2e3>t?t:void 0})),s.download=Fe(e),s},He=function(e){return e.getEntries?e.getEntriesByType("resource").sort((function(e,t){var n=e.duration,r=t.duration;return n>r?1:n===r?0:-1})).reduce((function(e,t){var n,r=function(e){var t,n=e.name,r=e.duration;return{name:n=n.split("?",1)[0],duration:(t=r,Math.round(t)/1e3)}}(t),o=r.name,i=r.duration,a=function(e){return/\.js$/.test(e)?"js":/\.css$/.test(e)?"css":/\.(?:svg|png|jpeg)$/.test(e)?"img":/\.(?:woff|eot|woff2|ttf)/.test(e)?"font":"other"}(o);return e[a]?e[a][o]=i:e[a]=((n={})[o]=i,n),e}),{}):{}},$e=function(){try{var e=window.performance,t=Be(),r=function(e){var t=e;if(!t.download)return{};for(var n={sizeTransferred:0,sizeResources:0},r=0,o=Ie(t.download);o.length>r;r++){var i=o[r];Object.prototype.hasOwnProperty.call(t.download,i)&&(n.sizeTransferred+=t.download[i].transferSize,n.sizeResources+=t.download[i].encodedBodySize)}return n}(t);return n({navigationStart:e.timing.navigationStart,timezone:-1*(new Date).getTimezoneOffset()/60,timings:t,requests:He(e)},r)}catch(e){return{}}};var Je={name:"pageSpeed",run:function(e){return new Promise((function(e){"complete"===document.readyState?e():window.addEventListener("load",(function(){return e()}))})).then((function(){return void 0===(e=0)&&(e=0),new Promise((function(n){setTimeout((function(){return n(t)}),e)}));var e,t})).then((function(){var e=$e(),t=e.requests,o=e.timings,i=r(e,["requests","timings"]);return n(n(n({},i),o),{requests:t,timings:o})}))}},Ge={name:"adblock",run:function(e,t){void 0===t&&(t={});var n=null;return t.fakeDivId?n=document.getElementById(t.fakeDivId):((n=document.createElement("div")).setAttribute("class","ads ad adsbox ad-placement carbon-ads"),n.setAttribute("style","height: 1px;width: 1px;position: absolute;left: -9999px;top: -9999px"),document.body.appendChild(n)),new Promise((function(e){setTimeout((function(){e(n&&0===n.offsetHeight?"yes":"no")}),20)}))}},Ke={name:"mobileOrientation",run:function(){var e=!0;try{e=window.orientation?90===Math.abs(Number(window.orientation)):"landscape"===screen.orientation.type.split("-")[0]}catch(e){}return e?"landscape":"portrait"},observe:function(e,t){window.addEventListener("orientationchange",t)}},We=ke(3,(function(e,t,n){void 0===n&&(n=[]);for(var r=n.length,o=0;r>o;o++)t=e(t,n[o],o,n);return t}));var Ye=function(e,t){return function(e,t,n,r){var o=Number(e.cookies.get(t)),i=Date.now();return!isFinite(Number(o))||i>o+n?r().then((function(){return e.cookies.set(t,i,V,!0)})):Promise.resolve()}(e,"__P__wuid_last_update_time",864e5,(function(){return function(e,t){var n=e.get("tapi"),r=e.get("logger"),o=["wuid="+encodeURIComponent(t)],i=e.cookies.all.__utma;return i&&o.push("ga_utma="+encodeURIComponent(i)),n(e,"webuser?"+o.join("&")).catch((function(e){return r.warn(e,"Wuid provider fetch error")}))}(e,t)}))},Qe={name:"wuid",run:function(e){var t,n;return t=function(e){var t=e.cookies.get(ge);if(/[0-9a-f]{32}/gi.test(t))return t}(e),t||(n=new Uint8Array(16),crypto.getRandomValues(n),t=We((function(e,t){return e+de(t.toString(16),2,"0")}),"",n),e.cookies.set(ge,t,V,!0)),Ye(e,t),t}},Ze=63072e3,Xe="ta_visit_start_ts",et="ta_visit_num",tt="ta_nr",nt={name:"taVisit",stateKey:["visitStartTs","visitNum","nr"],run:function(e){var t=Number(e.cookies.get(et)||void 0);isFinite(t)||(t=0),e.cookies.get(Xe)||(t?t+=1:t=1);var n=1===(t=t||1)?"new":"return";e.cookies.set(tt,n,Ze,!0),e.cookies.set(et,t,Ze,!0);var r=Number(e.cookies.get(Xe)||void 0);return isFinite(r)||(r=Date.now()),e.cookies.set(Xe,r,1800,!0),{visitNum:t,visitStartTs:r,nr:n}}},rt={name:"userType",run:function(e){return e.cookies.all.userType||"Visitor"}},ot={name:"pageLanding",run:function(e){var t=e.cookies.all.pageLanding;t&&"/"===t[0]&&(t=e.location.origin+t);var n=t||e.location.origin+e.location.pathname;return e.cookies.set(he,n,!1,!0),n}},it=ke(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var n=t,r=0;e.length>r;r++){if(null==n)return;n=n[e[r]]}return n})),at={name:"previousPage",run:function(e){var t=e.getOr("referrer"),n=e.location,r=1===it(["performance","navigation","type"],window)?n:t;if(r&&!_e(r.hostname,n.hostname))return r.href.split("?")[0]}},ut=[{name:"dspClickId",run:function(e){var t=Y(e),n=t&&t.query[me]||e.location.query[me]||e.cookies.all[me]||"no dsp_click_id";return e.cookies.set("dsp_click_id",n,C,!0),n}},pe,we,Oe,Q,rt,ot,be,nt,je,Te,Je,Ge,Ke,Qe,at],ct=function(){var e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);return{viewport:document.documentElement.clientHeight,height:n,scrollTop:window.pageYOffset||document.documentElement.scrollTop}},st=ke(2,(function(){for(var e=arguments.length,t=new Array(e),n=0;e>n;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))})),lt=st,dt={scrollEventName:"pageScroll",eventDelay:750},ft={viewport:"ta_viewport_previous",scroll:"ta_scroll_previous",height:"ta_height_previous"},pt={viewport:"previousViewport",scroll:"previousScroll",height:"previousHeight"};function vt(e,t){try{sessionStorage.setItem(ft[e],t.toString())}catch(e){return}}function mt(e){for(var t=0,n=Ie(e);n.length>t;t++){var r=n[t],o=e[r];o&&vt(r,o)}}function ht(){return["viewport","scroll","height"].reduce((function(e,t){var n=function(e){try{var t=sessionStorage.getItem(ft[e])||"",n=parseInt(t,10);return isNaN(n)?void 0:n}catch(e){return}}(t);return void 0!==n&&(e[pt[t]]=n),e}),{})}function gt(){return!!window._satellite&&!(!window._satellite.initialized&&!window.__satelliteLoaded)}function yt(){return gt()?Promise.resolve():new Promise((function(e){var t,n;t=e,n=window.setInterval((function(){gt()&&(clearInterval(n),t())}),100)}))}var wt={"tinkoff.ru":"//dp.tinkoff.ru/want/take/twa-ins","tinkoffinsurance.ru":"//dp.tinkoffinsurance.ru/want/take/twa-t"};function bt(e){return e.length>0?e[0].toUpperCase()+e.slice(1):e}function kt(e,t){return D(e,t.split("."))}function St(e,t,n){return Object.keys(t).every((function(r){return function(e,t){return t.split("|").some((function(t){return void 0!==kt(e,t)}))}(e,r)||t[r]&&Date.now()-n>=t[r]}))}function _t(e){var t,r=e.timeouts,o=void 0===r?{}:r,i=e.readyEvent,a=e.readyEventPayload,c=e.beforeEvent,s=e.tracked,l=e.blocked,d=e.resetOnSPATransition,f=void 0!==d&&d,p=void 0!==s&&s,v=void 0!==l&&l,m=Date.now(),h=!1,g=n({},a),y=function(e){if(h)throw Error("event "+i+" has been sent. cannot extend payload");g=function(){for(var e,t=arguments,n=arguments.length,r=0,o=arguments[0];++r<n;)for(var i in e=t[r])o=R(o,i,e[i]);return o}(g,e)},w=function(){if(!t)throw new Error("plugin isn't bound");var e;h||v||p||!function(){if(!t)throw new Error("plugin isn't bound");return St(t.state,o,m)}()||(h=!0,c&&O(c,{waitFor:function(t){e=t}},document),e?Promise.resolve(e).then((function(){t.emit("private"+bt(i)),t.event(i,g)})):(t.emit("private"+bt(i)),t.event(i,g)))},b=Object.keys(o),k=function(){m=Date.now(),p=!1,h=!1,w(),h||S()},S=function(){b.forEach((function(e){var t=o[e];isFinite(t)&&t&&setTimeout(w,t+1)}))};return{name:"data-observer",trySend:w,setTracked:function(e){p=e,h=e},setBlocked:function(e){v=e,t&&!v&&w()},plugin:function(e){t=e.tracking,S(),setTimeout(w),t.on("event:"+i,(function(){if(p=!0,u.getItem("tcs:tracking:do")){console.group("do:"+i);for(var e=0,n=b;n.length>e;e++)for(var r=0,o=n[e].split("|");o.length>r;r++){var a=o[r],c=kt(t.state,a);console.log(a,": "+typeof c,"=",c)}console.groupEnd()}})),t.on("change",w),t.on("do:"+i+":invalidate",w),t.on("do:"+i+":extend-payload",y),f&&t.on("newLocation",k)}}}var Ot={adblock:1e3};var jt,Et={name:"makeEventeaHandler",init:function(e){var t=e.tracking,n=function(e){!function(e,t){var n=t.event,r=t.config,o=void 0===r?{}:r,i=t.payload,a=n,u=void 0===i?{}:i;"pushTrack"===o.type&&(a=o.type,u.pageAction?u._event=n:u.pageAction=n),e.event(a,u)}(t,e)};return function(){return n}}},Pt={name:"makeEventeaDataHandler",init:function(e){var t=e.tracking,n=function(e){!function(e,t){var n=t.payload;e.extend(void 0===n?{}:n)}(t,e)};return function(){return n}}};function It(e,t){return void 0===t&&(t={}),new Promise((function(n,r){var o=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,Object.assign(i,t),o.appendChild(i),i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Error when loading "+e+" script"))}}))}!function(e){e.AppMeasurement="am-2.22.0.js",e.VisitorAPI="va-5.2.0.js"}(jt||(jt={}));var Tt="loadedResorucesMap";function At(e,t){var n=function(e){var t=e.getOr(Tt);return t||e.bind(Tt,t=new Map),t}(e),r=n.get(t);return r||(r=function(e,t){var n=e.get("config").cdnUrl;return It((void 0===n?"https://www.cdn-tinkoff.ru/":n)+"twa/hosted-libs/"+t)}(e,t).catch((function(e){throw n.delete(t),e})),n.set(t,r)),r}var Ct,Vt="tcsbank",xt={account:Vt,trackingServer:"tinkoffcreditsystems.d3.sc.omtrdc.net",visitorNamespace:"tinkoffcreditsystems",orgId:"A002FFD3544F6F0A0A4C98A5@AdobeOrg"};function Mt(e,t){void 0===t&&(t={});var r=n(n({},xt),t),o=r.trackingServer,i=r.visitorNamespace,a=r.orgId,u=r.account;return function(e,t){return Promise.all(t.map(At.bind(null,e)))}(e,[jt.AppMeasurement,jt.VisitorAPI]).then((function(){var e="s_c_il"in window&&(null===s_c_il||void 0===s_c_il?void 0:s_c_il.find((function(e){return"s_c"===e._c&&e.account===u}))),t=s_gi(u);return e||(t.trackingServer=o,t.visitorNamespace=i,t.visitor=Visitor.getInstance(a),window.s=t),t}))}function Nt(e,t,n){return Object.keys(e).reduce((function(r,o){var i=e[o],a=function(e,t,n){var r;switch(e.type){case Ct.State:for(var o=0,i="string"==typeof e.path?[e.path]:e.path;i.length>o&&void 0===(r=it(i[o].split("."),t.state));o++);break;case Ct.Cookie:r=n.cookies.get(e.name);break;case Ct.Static:r=e.value;break;case Ct.Custom:r=e.code(t,n)}return e.modificator?e.modificator(r):r}(i,t,n);return void 0===a||i.requiredValues&&!i.requiredValues.every((function(e){return e in r}))||(r[o]=a),r}),{})}!function(e){e.State="state",e.Cookie="cookie",e.Custom="custom",e.Static="static"}(Ct||(Ct={}));var Lt={type:Ct.Static,value:""};var qt={event351:{type:Ct.State,path:"personalizedLandingMetrics.techInfo.response-time",modificator:function(e){var t=Math.round(1e3*Number(e));if(Number.isFinite(t))return t.toString()}},event353:n(n({},Lt),{requiredValues:["event351"]})};var Dt={pageName:{type:Ct.State,path:"url.pathname"},server:{type:Ct.State,path:"url.hostname"}},Rt={eVar1:{type:Ct.Static,value:document.location.pathname},eVar2:{type:Ct.Static,value:"D=g"},eVar3:{type:Ct.Static,value:"D=r"},eVar5:{type:Ct.Static,value:'D=bw+" x "+bh'},eVar11:{type:Ct.State,path:"wuid"},eVar12:{type:Ct.State,path:"layout"},eVar13:{type:Ct.State,path:"pageLanding"},eVar14:{type:Ct.Custom,code:function(e){return e.state.hdRequestInfo?e.state.hdRequestInfo.ismobile?"Mobile":e.state.hdRequestInfo.istablet?"Tablet":e.state.hdRequestInfo.isconsole?"Console":"Desktop":"NoHdRequestInfo"}},eVar15:{type:Ct.State,path:"hdRequestInfo.vendor"},eVar16:{type:Ct.State,path:"hdRequestInfo.model"},eVar17:{type:Ct.State,path:"hdRequestInfo.width"},eVar18:{type:Ct.State,path:"hdRequestInfo.height"},eVar19:{type:Ct.State,path:"hdRequestInfo.displaysize"},eVar21:{type:Ct.State,path:"utmMarkers.utm_source"},eVar22:{type:Ct.State,path:"utmMarkers.utm_content"},eVar23:{type:Ct.State,path:"utmMarkers.utm_term"},eVar24:{type:Ct.State,path:"utmMarkers.utm_medium"},eVar25:{type:Ct.State,path:"utmMarkers.utm_campaign"},eVar26:{type:Ct.State,path:"url.query.utm_referrer"},eVar27:{type:Ct.State,path:"utmMarkers.wm"},eVar28:{type:Ct.State,path:"utmMarkers.sid"},eVar29:{type:Ct.State,path:"devicePlatform"},eVar31:{type:Ct.State,path:"appName"},eVar35:{type:Ct.Static,value:window.devicePixelRatio.toString()},eVar36:{type:Ct.State,path:"userType"},eVar39:{type:Ct.State,path:"remoteAddress"},eVar40:{type:Ct.State,path:"userStatus"},eVar43:{type:Ct.State,path:"personalizedLandingMetrics.state.dcoSelectedWith"},eVar45:{type:Ct.State,path:"layoutMedia"},eVar46:{type:Ct.Custom,code:function(e,t){var n="s_nr",r=(new Date).getTime(),o=t.cookies.get(n),i=31536e6;if(!o)return t.cookies.set(n,r+"-New",i),"New";var a=o.split("-");return 18e5>r-Number(a[0])&&"New"===a[1]?(t.cookies.set(n,r+"-New",i),"New"):(t.cookies.set(n,r+"-Repeat",i),"Repeat")}},eVar47:{type:Ct.State,path:"userId"},eVar54:{type:Ct.State,path:"utmMarkers.utm_content",modificator:function(e){var t;return null===(t=null==e?void 0:e.split("|cid|")[1])||void 0===t?void 0:t.split("|")[0]}},eVar56:{type:Ct.State,path:"dspClickId"},eVar57:{type:Ct.State,path:"dmpId"},eVar59:{type:Ct.State,path:"personalizedLandingMetrics.state.dcoGeneralId"},eVar63:{type:Ct.State,path:"productCategory"},eVar64:{type:Ct.State,path:"productName"},eVar65:{type:Ct.State,path:"hid"},eVar66:{type:Ct.State,path:"url.query.variation"},eVar70:{type:Ct.State,path:"personalizedLandingMetrics.dcoVariablesBeforeRedirect.dcoGeneralId"},eVar76:{type:Ct.State,path:"investUserType"},eVar80:{type:Ct.State,path:"url.query.internal_source"},eVar85:{type:Ct.State,path:"uaParserType"},eVar89:{type:Ct.State,path:"url.query.dco_campaign"},eVar90:{type:Ct.State,path:"uid"},eVar91:{type:Ct.State,path:"visitStartTs"},eVar92:{type:Ct.State,path:"visitNum"},eVar93:{type:Ct.State,path:"nr"},eVar77:{type:Ct.Cookie,name:"businessUserType"},eVar87:{type:Ct.Cookie,name:"dco.id"},eVar88:{type:Ct.Cookie,name:"dco.sid"}},zt={prop2:{type:Ct.Static,value:"D=g"},prop3:{type:Ct.Static,value:"custom load"},prop4:{type:Ct.State,path:"url.pathname"},prop5:{type:Ct.Static,value:"web-tracking"},prop7:{type:Ct.Custom,code:function(){return document.referrer}},prop9:{type:Ct.State,path:"appName"},prop11:{type:Ct.State,path:"previousPage"},prop13:{type:Ct.State,path:"layout"},prop14:{type:Ct.State,path:"errorType"},prop24:{type:Ct.State,path:"adblock"},prop29:{type:Ct.State,path:"mobileOrientation"},prop35:{type:Ct.State,path:"url.query.utm_source"},prop41:{type:Ct.Cookie,name:"_ga",modificator:function(e){return null==e?void 0:e.split(".").slice(1).join(".")}},prop42:{type:Ct.State,path:"url.frameurl"},prop44:{type:Ct.State,path:"dco.beforeRedirectPageUrl"},prop46:{type:Ct.Custom,code:function(){return document.title}},prop47:{type:Ct.State,path:"personalizedLandingMetrics.state.dcoGeneralId"},prop49:{type:Ct.State,path:"url.search"},prop52:{type:Ct.State,path:"pageErrorCode"},prop53:{type:Ct.State,path:"url.query.internal_source"},prop64:{type:Ct.Custom,code:function(){return document.documentElement.clientHeight.toString()}},prop65:{type:Ct.Custom,code:function(){return document.documentElement.clientWidth.toString()}},prop66:{type:Ct.State,path:"url.pathname",modificator:function(e){return null==e?void 0:e.replace(/\/(id)?[0-9]{5,}/,"")}},prop68:{type:Ct.State,path:"personalizedLandingMetrics.enrichmentTechInfo.dcoAppliedStatus"},prop70:{type:Ct.State,path:"personalizedLandingMetrics.techInfo.response-status"}},Ut=n(n(n({events:{type:Ct.Custom,code:function(e,t){var r=n(n(n({},qt),function(e){var t={event279:{type:Ct.Custom,code:function(){return Math.round(performance.now()).toString()}},event281:n(n({},Lt),{requiredValues:["event279"]})};return e.state.firstPage?n(n({},t),{event1:{type:Ct.Custom,code:function(){return Math.round(performance.now()/100).toString()}},event2:n(n({},Lt),{requiredValues:["event1"]})}):t}(e)),function(){var e,t={};try{e=JSON.parse(sessionStorage.getItem("ibdashboardWidgetsAnalytics")||"{}")}catch(e){}return e&&(e.show_widget_piechart&&(t.event438=Lt),e.show_widget_finanalyse&&(t.event439=Lt),e.show_widget_bonuses&&(t.event440=Lt),e.show_widget_bonuses_highcash&&(t.event441=Lt)),t}());return function(e){return Object.keys(e).map((function(t){var n=e[t];return""!==n?t+"="+n:t})).join(",")}(Nt(r,e,t))}},products:{type:Ct.Custom,code:function(e){var t=e.state,n=t.productName,r=t.productCategory;if(n&&r)return n+";"+r}}},Dt),Rt),zt),Ft=["tcsbank"];var Bt=function(e,t,n){var r=t.get("logger");return!!function(e){return!!e&&-1!==Ft.indexOf(e)}(n)&&(e.emit("do:pageLoad:extend-payload",{abortAdobeAnalytics:!0}),e.on("privatePageLoad",(function(){Mt(t,{account:n}).then((function(n){var o=Nt(Ut,e,t);Object.keys(o).forEach((function(e){n[e]=o[e]})),n.t(),n.clearVars(),r.info("adobe analytics pageview has sent to "+n.account+" account")})).catch((function(e){r.error(e,"fialed to send Adobe Analytics pageview")}))})),!0)},Ht={posCredit:"tcsbroker",bToBInsurance:"tcsb2binsurance"},$t={src:"https://www.cdn-tinkoff.ru/twa/l/latest/launch-platform.min.js"};var Jt=/([a-z])([A-Z])/g,Gt=/[^a-zA-Z]+/g;var Kt=function(e){return e.replace(Jt,(function(e,t,n){return t+" "+n})).split(Gt)},Wt=function(e){return""+e.charAt(0).toUpperCase()+e.slice(1)};var Yt,Qt=function(e){return Kt(e).map((function(e,t){return 0===t?e.toLowerCase():Wt(e.toLowerCase())})).join("")},Zt="https://assets.adobedtm.com/",Xt={journal:{src:Zt+"launch-ENdd5a95b9a0f648859a2e99c25709ccf2.min.js",async:!0},posCredit:{src:Zt+"daaba51b4562/1e0e09d1a049/launch-81c4ea2dce1e.min.js",async:!0},subModules:{src:Zt+"daaba51b4562/3ba152e5f452/launch-a12d09048770.min.js",async:!0},bToBInsurance:{src:Zt+"daaba51b4562/1f7864abddb0/launch-53ce990a60cb.min.js",async:!0},fintech:{src:Zt+"daaba51b4562/a10dc55353ad/launch-44ef2f36c41b.min.js",async:!0}},en=Object.assign({},window.twtConfig,window.twtDebugConfig);en.atmContainers=Xt;var tn,nn=Qt(v((null===(Yt=document.currentScript)||void 0===Yt?void 0:Yt.getAttribute("src"))||"").query.container||"")||en.atmContainerName,rn=function(e,t,n){Array.isArray(t)||(n=t,t=[]);var r=Object.assign({},E,n);e.bind("config",r);var i=function(e){var t=e.get("config"),n=e.getOr("log"),r=t.log,o=e.getOr("logger"),i=t.logger;n&&n(oe),r&&r(oe);var a,u=i||r||o||n;return"object"==typeof u?u:{warn:a="function"==typeof u?u:re,debug:a,error:a,info:a,log:a}}(e);e.bind("logger",i);var a="u"!==(typeof window)[0],s={};a&&(r.recreateTracking?window[r.global]&&window[r.global]._clearAllListeners():s=window[r.global]?window[r.global]:s,window[r.global]=s,s.localStorage=u,s.sessionStorage=c);var l,d=[],f=e.emitter||(l=l||Object.create(null),{on:function(e,t){(l[e]||(l[e]=[])).push(t)},off:function(e,t){l[e]&&l[e].splice(l[e].indexOf(t)>>>0,1)},emit:function(e){var t=[].slice.call(arguments,1);(l[e]||[]).map((function(e){e.apply(void 0,t)})),(l["*"]||[]).map((function(n){n.apply(void 0,[e].concat(t))}))}});Object.assign(s,f),s.on=function(e,t){if(e&&"event:"===e.substr(0,6)&&a){var n=e.substr(6),r=function(e){e instanceof CustomEvent&&t(e.detail)};d.push((function(){return document.body.removeEventListener(n,r)})),document.body.addEventListener(n,r)}else d.push((function(){return f.off(e,t)})),f.on(e,t)},s._clearAllListeners=function(){d.forEach((function(e){return e()}))},s.state=Object.assign({},s.state,r.initialState);var v=[],m=!1;function h(e){m=!0,v.push(e)}function g(t,n){s.emit("event",t,n),e.getOr("event",le)(t,n),i.info("Dispatched event: ",t,n)}var y,w=!1,b=function(e){var t=s.state;return t!==e&&(s.state=e,s.emit("change",e,t)),s},k=(y=[],{run:function(e,t){for(var n=[],r=2;arguments.length>r;r++)n[r-2]=arguments[r];var o=y.map((function(t){return t(e)}));return te.apply(void 0,o)(t).apply(void 0,n)},add:function(e){y.push(e)}});s.use=function(t){var n="plugin"in t?t.plugin:t;try{n({config:r,tracking:s,context:e,update:b,providersPipeline:k,addEventsBlocker:h})}catch(e){i.error(e,"Failed to initialize plugin "+t.name)}return s},s.event=function e(t,n){return!a||document.body||w||(h(new Promise((function(e){document.addEventListener("DOMContentLoaded",e)}))),w=!0),!1===m?g(t,n):Promise.all(v).then((function(r){m=r.length!==v.length,e(t,n)})),s},s.addPixel=function(e){return function(t){return document.createElement("img").src=t,e}}(s),s.addPixels=function(e){return function(t,n){void 0===n&&(n={});var r=n.timeout,o=void 0===r?3e3:r,i=n.completeEvent,a=void 0===i?"pixelRequestsCompleted":i,u=t.map(ee),c=!1;return X?Promise.resolve(e.event(a,{timeout:c,urls:t})):Promise.race([Z(u),new Promise((function(e){return setTimeout((function(){c=!0,e(null)}),o)}))]).then((function(){return e.event(a,{timeout:c,urls:t})}))}}(s),s.utils={},s.addUtil=function(t){var n=t.name,r=t.init;try{s.utils[n]=r({tracking:s,context:e}),s.emit("util-provided:"+n,s.utils[n])}catch(e){i.error(e,"Failed to initialize util "+n)}return s},s.callUtil=function(e){for(var t=[],n=1;arguments.length>n;n++)t[n-1]=arguments[n];var o=new Promise((function(e,t){return setTimeout((function(){return t(new Error("Timeout has been reached"))}),r.utilTimeout)})),a=new Promise((function(n){var r;e in s.utils?n((r=s.utils)[e].apply(r,t)):s.on("util-provided:"+e,(function(e){n(e.apply(void 0,t))}))}));return Promise.race([a,o]).catch((function(t){i.error(t,'Calling tracking utility "'+e+'" has been failed')}))},s.extend=function(e){i.info("Tracking extend:",e);var t=Object.keys(e).reduce((function(t,n){return U(t,n.split("."),e[n])}),s.state);return b(t)},s.extendDeep=function(e){i.info("Tracking extendDeep:",e);var t=Object.keys(e).reduce((function(t,n){return K(t,n.split("."),(function(e,t){return ne(e)&&ne(t)?function(){for(var e=arguments,t=arguments.length,n=0,r=arguments[0];++n<t;)r=W(r,e[n]);return r}(e,t):t}),e[n])}),s.state);return b(t)},s.remove=function(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];i.info("Tracking remove:",e.join(", "));var n=$.apply(void 0,o([s.state],e.map((function(e){return e.split(".")})),!1));return b(n)},s.updateLocation=function(){var t;return b((t=s.state,"client"===e.env&&e.bind("location",p()),U(t,"url",Q.run(e)))),s.emit("newLocation"),s},s.update=b;var S=r.providers||{},_=function(t,n){void 0===n&&(n=!1);var r,o=t.stateKey||t.name,a=S[t.name];if(s.emit("provider-run",t.name),n){var u=void 0;if(o instanceof Array){var c=o.reduce((function(e,t){return void 0!==D(s.state,t)&&(e[t]=D(s.state,t)),e}),{});se(c)||(u=c)}else u=D(s.state,o.split("."));if(void 0!==u)return s.emit("provider-resolved",t.name,u),Promise.resolve()}try{r=Promise.resolve(k.run(t,t.run,e,a))}catch(e){r=Promise.reject(e)}return r.then((function(e){!function(e,t){var n;s.extend("string"==typeof e?((n={})[e]=t,n):t)}(o,e),s.emit("provider-resolved",t.name,e)})).catch((function(e){if(!e||"ESkipApply"!==e.code)throw s.emit("provider-error",t.name,e),i.error(e,"Provider "+t.name+" error"),e}))},O=function(t){var n=t.map((function(t){return"client"===e.env&&t.observe&&t.observe(e,(function(){_(t,!1)})),_(t,!0)}));return n.length?Z(n):Promise.resolve()};return s.ready=Promise.resolve().then((function(){return O(t)})),s.waitFor=function(e){return e in s.state?Promise.resolve(s.state[e]):new Promise((function(t,n){s.on("provider-resolved",(function(n,r){n===e&&t(r)})),s.on("provider-error",(function(t,r){t===e&&n(r)}))}))},s.fullfill=O,s._version="5.3.3",g("tracking-created",s),s}(new e(n(n({},i),{logger:-1!==(u.getItem("debug")||"").indexOf("Tinkoff:info:tracking")?console:void 0,jsonp:l,parseUrl:v,request:g,location:p(),cookies:S(),referrer:document.referrer?v(document.referrer):void 0,event:O,collectLog:j})),ut,en).use((function(e){var t=e.tracking,n=e.addEventsBlocker;window.trackingStore=t,window.addPixel=t.addPixel;var r=yt();n(r),r.then((function(){return t.event("satelliteReady")}))})).use(function(e){var t=lt(dt,e),o=t.eventDelay,i=t.scrollEventName;return function(e){var t=e.tracking,a={viewport:0,height:0,scroll:0};function u(){var e=ct(),t=e.scrollTop,o=r(e,["scrollTop"]);return a=n(n({},o),{scroll:Math.max(a.scroll,t)})}function c(){a={viewport:0,height:0,scroll:0};var e=ct().scrollTop;t.extend(n(n({scrollOnPage:e},u()),ht()))}c(),window.addEventListener("scroll",Pe(o,(function(){var e=u();t.extend(e).event(i,e)}))),window.addEventListener("beforeunload",(function(){mt(a)})),t.on("newLocation",(function(){mt(a),c()}))}}()).use((function(e){var t=e.tracking,n=performance.timing.navigationStart;t.on("newLocation",(function(){n=+new Date,t.remove("timing")}));for(var r=function(e){t.on("event:"+e,(function(){var r;n&&t.extend(((r={})["timing."+e]=+new Date-n,r))}))},o=0,i=["pageLoad","partnerLoad"];i.length>o;o++){r(i[o])}})).use((tn={waitFor:["pageLanding"]},void 0===tn&&(tn={}),function(e){var t=e.tracking,n=e.context,r=tn.waitFor,o=tn.timeout,i=void 0===o?2e3:o,a=n.location.hostname,u=n.get("logger"),c=t.ready;if(r){var s=new Promise((function(e,t){return setTimeout((function(){return t(new Error("timeout reached waiting for providers: "+r.join(",")))}),i)}));c=Promise.race([Promise.all(r.map((function(e){return t.waitFor(e)}))),s])}return c.then((function(){var e=a.split(".").slice(-2).join("."),n=wt[e];n&&t.addPixel(n)})).catch((function(e){u.error(e,"failed to run cookie-duplicator plugin")}))})).use(function(e){void 0===e&&(e={});var t=e.timeouts,r=void 0===t?Ot:t,o=e.waitFor,i=e.tracked,a=e.eventPayload,u=_t({readyEvent:"pageLoad",readyEventPayload:n(n({},void 0===a?{}:a),{initiator:"web-tracking"}),beforeEvent:"beforePageLoad",timeouts:r,tracked:i,resetOnSPATransition:!0,blocked:!!o});return o&&o.then((function(){u.setBlocked(!1)})),u}({timeouts:{adblock:500}})).addUtil(Et).addUtil(Pt);nn&&nn in Xt&&rn.use(function(e){return function(t){var n,o=t.context,i=t.tracking,a=e.loadingDelayPromise,u=void 0===a?Promise.resolve():a,c=o.get("logger"),s="staticContainer"in e,l=s?Promise.resolve(e.staticContainer):function(e){var t=e.get("config"),n=t.resourceApi,r=t.atmContainers;return r?Promise.resolve(r):e.get("request")(n+"resources?name=analytics_config").then((function(e){return e.json()})).then((function(e){return e.result.value})).then((function(e){return e.atm.containers}))}(o).then((function(t){return(null==t?void 0:t[e.containerName])||(c.error("cannot get launch container description, fallback will be used"),$t)})),d=Bt(i,o,n=s?e.adobeAccount:Ht[e.containerName]||Vt)?u:Promise.resolve();return Promise.all([l,Mt(o,n?{account:n}:{}),d]).then((function(e){var t=e[0];return It(t.src,r(t,["src"]))})).then((function(){return c.info("launch lib has successfuly loaded")})).catch((function(e){return c.error(e,"launch loading has failed")}))}}({containerName:nn}))}();
